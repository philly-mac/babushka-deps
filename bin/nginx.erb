#!/bin/bash

name=nginx
PID=`pgrep nginx`

case "$1" in
start)
    stat_busy "Starting $name daemon"
    [[ -z "$PID" ]] && /opt/nginx/sbin/nginx &>/dev/null
    sleep 1
    pgrep nginx &>/dev/null
    if [[ "$?" = "0" ]]; then
        add_daemon $name;
        stat_done;
    else
        stat_fail;
        exit 1;
    fi
    ;;
stop)
        stat_busy "Stopping $name daemon"
        [[ -n "$PID" ]] && kill $PID &>/dev/null \
        && { rm_daemon $name; stat_done; } \
        || { stat_fail; exit 1; }
        ;;
restart)
        $0 stop
        sleep 1
        $0 start
        ;;
*)
        echo "usage: $0 {start|stop|restart|reload}"
        ;;
esac
exit 0


