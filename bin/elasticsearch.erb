#!/bin/bash

name=elasticsearch
PID=`pgrep -f elasticsearch`

case "$1" in
start)
    echo "Starting $name daemon"
    [[ -z "$PID" ]] && /opt/elasticsearch/bin/elasticsearch &>/dev/null
    sleep 1
    pgrep -f elasticsearch &>/dev/null
    if [[ "$?" = "0" ]]; then
        echo "Started"
    else
        echo "Failed"
    fi
    ;;
stop)
    echo "Stopping $name daemon"
    [[ -n "$PID" ]] && kill $PID &>/dev/null
    sleep 1
    pgrep -f elasticsearch &>/dev/null
    if [[ "$?" != "0" ]]; then
        echo "Stopped"
    else
        echo "Failed"
    fi
    ;;
restart)
    $0 stop
    sleep 1
    $0 start
    ;;
*)
    echo "usage: $0 {start|stop|restart}"
    ;;
esac
exit 0


